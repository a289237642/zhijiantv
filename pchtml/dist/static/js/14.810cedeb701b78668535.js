webpackJsonp([14],{BjKS:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});e("PJh5");var i={name:"tipoffLibrary",data:function(){var t=this;return{uploadModal:!1,addLinkModal:!1,isDisable:!0,h5Img:"",articleid_img:"",checkedGroup:[],groups:[],articleSource:[],articleid:"",isShow:!1,onlineid:0,art_detail:{},checkedArc:[],table:{page:1,pagesize:10,total:10,columns:[{type:"selection",title:"全选",width:60,align:"center"},{title:"序号",width:80,key:"location",align:"center"},{title:"抓取来源（名称）",key:"wechat_name",align:"center"},{title:"公众号ID",key:"alias",align:"center"},{title:"操作",align:"center",render:function(a,e){return a("div",[a("i-button",{attrs:{title:""},style:{marginRight:"10px"},on:{click:function(){t.checkedArc=[],t.uploadStatus(e.row.wechat_id)}}},"设置"),a("i-button",{on:{click:function(){t.$Modal.warning({content:"确定删除该公众号吗?",onOk:function(){t.checkedArc=[],t.deleteTipoff(e.row.wechat_id)}})}}},"删除")])}}],data:[]},formValidate:{main_img:""},ruleValidate:{uploadimg:[{required:!0,validator:function(a,e,i){""==t.h5Img?i(new Error("请上传公众号头图(大小不超过2M, 只支持jpg,jpeg,gif,bmp格式)")):i()},trigger:"blur"}]},formValidate1:{link:""},ruleValidate1:{link:[{required:!0,message:"请输入要抓取的公众号链接",trigger:"blur"}]}}},methods:{getData:function(){var t=this;this.$http.post(this.PATH.WECHATNAMELIST,{page:this.table.page,pagesize:this.table.pagesize,is_show:0}).then(function(a){0==a.data.errno?(t.table.data=a.data.data,t.table.total=a.data.count):t.$Modal.error({width:360,content:a.data.errmsg})})},changePage:function(t){this.table.page=t,this.is_search?this.searchTipoff():this.getData()},showLinkModal:function(){this.addLinkModal=!0},submitLinkForm:function(t){var a=this;this.formValidate1.content;this.$refs[t].validate(function(t){if(t){a.formValidate1.type;var e=a.PATH.ADDWECHATNAME,i=new Object;i={wechat_name:a.formValidate1.wechat_name,alias:a.formValidate1.alias},a.$http.post(e,i).then(function(t){0==t.data.errno?(a.$Modal.success({title:"提示",content:t.data.errmsg,onOk:function(){a.addLinkModal=!1}}),a.formValidate1.wechat_name="",a.formValidate1.alias=""):a.$Modal.success({title:"提示",content:t.data.errmsg,onOk:function(){a.addLinkModal=!1}}),a.getData()})}else a.$Message.error("Fail!")})},deleteTipoff:function(t){var a=this,e=[];e.push(t),this.$http.post(this.PATH.DELWECHATNAME,{wechat_id_list:e}).then(function(t){0==t.data.errno?a.getData():a.$Modal.error({width:360,content:t.data.errmsg})})},delectArcs:function(){var t=this;this.$Modal.warning({content:"确定删除该爆料吗?",onOk:function(){t.$http.post(t.PATH.DELWECHATNAME,{wechat_id_list:t.checkedArc}).then(function(a){0==a.data.errno?(t.getData(),t.checkedArc=[]):t.$Modal.error({width:360,content:a.data.errmsg})})}})},getGroups:function(){var t=this;this.$http.get(this.PATH.GROUPS).then(function(a){0==a.data.errno?t.groups=a.data.data:t.$Modal.error({width:360,content:a.data.errmsg})})},uploadStatus:function(t){this.uploadModal=!0,this.checkedArc.push(t),this.getGroups()},uploadStatus1:function(){this.uploadModal=!0,this.getGroups()},onlineArc:function(t){var a=this;this.checkedArc=[],t.forEach(function(t){a.checkedArc.push(t.wechat_id)})},onArc:function(t){var a=this;this.checkedArc=[],t.forEach(function(t){a.checkedArc.push(t.wechat_id)})},checkMoreGroupChange:function(t){this.checkedGroup=t},editcategory:function(){var t=this,a=this.checkedGroup;this.$http.post(this.PATH.SETWECHATGROUP,{wechat_id_list:this.checkedArc,group_id_list:a}).then(function(a){0==a.data.errno?(t.checkedArc=[],t.getData()):t.$Modal.error({width:360,content:a.data.errmsg}),t.checkedGroup=[],t.uploadModal=!1})}},created:function(){this.getData(),this.getGroups()}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"tipoffLibrary"}},[e("div",{staticClass:"h1"},[t._v("公众号库       \n      ")]),t._v(" "),e("div",{staticClass:"header"},[e("Button",{staticClass:"newbtn zhijian-new-btn",attrs:{type:"primary"},on:{click:function(a){t.showLinkModal()}}},[t._v("新增")]),t._v(" "),e("Button",{staticClass:"newbtn1 zhijian-new-btn",attrs:{type:"primary"},on:{click:t.uploadStatus1}},[t._v("批量设置")]),t._v(" "),e("Button",{staticClass:"newbtn2 zhijian-new-btn",attrs:{type:"primary"},on:{click:t.delectArcs}},[t._v("批量删除")])],1),t._v(" "),e("Table",{ref:"selection",staticClass:"zhijian-table account-table",attrs:{stripe:"",columns:t.table.columns,data:t.table.data},on:{"on-selection-change":t.onArc,"on-select-all":t.onlineArc}}),t._v(" "),e("div",{staticClass:"zhijian-pagination"},[e("Page",{attrs:{total:t.table.total,current:t.table.page,"show-elevator":"",pageSize:t.table.pagesize},on:{"on-change":t.changePage}})],1),t._v(" "),e("Modal",{attrs:{"mask-closable":!1,width:"535","class-name":"ma-upload-modal"},model:{value:t.uploadModal,callback:function(a){t.uploadModal=a},expression:"uploadModal"}},[e("div",{staticClass:"edit-modal-body"},[e("div",{staticClass:"title"},[t._v("请选择需要设置的类型")]),t._v(" "),t._l(t.groups,function(a){return e("Checkbox-group",{key:a.groups,on:{"on-change":t.checkMoreGroupChange},model:{value:t.checkedGroup,callback:function(a){t.checkedGroup=a},expression:"checkedGroup"}},[e("Checkbox",{attrs:{label:a.group_id}},[t._v(t._s(a.group_name))])],1)})],2),t._v(" "),e("div",{staticClass:"zhijian-btn-box"},[e("div",{staticClass:"zhijian-btn-confirm",on:{click:t.editcategory}},[t._v("确定")])])]),t._v(" "),e("Modal",{attrs:{"mask-closable":!1,width:"535","class-name":"ma-edit-modal"},model:{value:t.addLinkModal,callback:function(a){t.addLinkModal=a},expression:"addLinkModal"}},[e("div",{staticClass:"edit-modal-body hint"},[e("Icon",{attrs:{type:"android-close"},on:{click:function(a){t.editModal=!1}}}),t._v(" "),e("Form",{ref:"formValidate1",attrs:{model:t.formValidate1,rules:t.ruleValidate1,"label-width":120}},[e("FormItem",{attrs:{label:"抓取来源（名称）",prop:"wechat_name"}},[e("Input",{attrs:{type:"text",placeholder:"请输入抓取来源（名称）"},model:{value:t.formValidate1.wechat_name,callback:function(a){t.$set(t.formValidate1,"wechat_name",a)},expression:"formValidate1.wechat_name"}})],1),t._v(" "),e("FormItem",{attrs:{label:"公众号ID",prop:"alias"}},[e("Input",{attrs:{type:"text",placeholder:"请输入公众号ID"},model:{value:t.formValidate1.alias,callback:function(a){t.$set(t.formValidate1,"alias",a)},expression:"formValidate1.alias"}})],1)],1)],1),t._v(" "),e("div",{staticClass:"zhijian-btn-box"},[e("Button",{staticClass:"newbtn zhijian-new-btn",attrs:{type:"primary"},on:{click:function(a){t.submitLinkForm("formValidate1")}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var o=e("VU/8")(i,n,!1,function(t){e("ya+E")},null,null);a.default=o.exports},"ya+E":function(t,a){}});