webpackJsonp([7],{OBCh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"tipoffManagement",data:function(){var t=this;return{editModal:!1,words:"",table:{page:1,pagesize:10,total:50,editgroupId:0,columns:[{title:"排序",key:"sort_num",width:130,align:"center"},{title:"爆料类型ID",key:"group_id",width:130,align:"center"},{title:"爆料类型名称",key:"group_name",align:"center"},{title:"操作",align:"center",render:function(e,a){return e("div",[e("i-switch",{attrs:{title:"0"==a.row.is_show?"已停用":"已启用"},props:{value:a.row.is_show+"",trueValue:"1",falseValue:"0"},on:{"on-change":function(e){t.changeStatus(a.row.group_id,a.row._index,e)}}}),e("i",{attrs:{class:"iconfont icon-edit"},on:{click:function(){t.showEditModal("edit",a.row),t.table.editgroupId=a.row.group_id}}}),e("i",{attrs:{class:"iconfont icon-delete"},style:{color:"#ffc639"},on:{click:function(){t.$Modal.warning({content:"确定删除该爆料类型吗?",onOk:function(){t.$http.post(t.PATH.DELGROUP,{group_id:a.row.group_id.slice(2)}).then(function(e){200==e.status&&t.getgroups()})}})}}})])}}],data:[]},formValidate:{type:"new",row:{},content:"",sort:""},ruleValidate:{sort:[{required:!0,message:"序号",trigger:"blur"}],content:[{required:!0,message:"请输入爆料类型名称",trigger:"blur"}]}}},methods:{getgroups:function(){var t=this;this.$http.get(this.PATH.PCGROUPS).then(function(e){0==e.data.errno?t.table.data=e.data.data:t.$Modal.error({width:360,content:e.data.errmsg})})},search:function(){var t=this;""==this.words?this.getgroups():this.$http.post(this.PATH.GROUPSEARCH,{words:this.words}).then(function(e){0==e.data.errno?t.table.data=e.data.data:t.$Modal.error({width:360,content:e.data.errmsg})}),this.words=""},changeStatus:function(t,e,a){var o=this;t=t.slice(2),this.$http.post(this.PATH.STARTGROUP,{group_id:t}).then(function(t){"200"==t.status?o.table.data[e].is_show=a:(o.table.data[e].is_show="1"==a?"0":"1",o.$Modal.error({width:360,content:t.data.msg})),o.getgroups()})},showEditModal:function(t,e){this.formValidate.type=t,"new"==t?(this.$refs.formValidate.resetFields(),this.formValidate.group_id="",this.formValidate.content="",this.formValidate.sort=""):(this.formValidate.group_id=e.group_id,this.formValidate.content=e.group_name,this.formValidate.sort=e.sort_num),this.editModal=!0},submitForm:function(t){var e=this,a=this.formValidate.content;this.$refs[t].validate(function(t){if(t){var o=e.formValidate.type,i=e.PATH.UODATEGROUP,r=new Object;r="new"==o?{name:a,sort_num:e.formValidate.sort}:{name:a,group_id:e.table.editgroupId.slice(2),sort_num:e.formValidate.sort},e.$http.post(i,r).then(function(t){e.formValidate.type,e.$Modal.success({title:"提示",content:t.data.errmsg,onOk:function(){e.editModal=!1}}),e.getgroups()})}else e.$Message.error("Fail!")})}},created:function(){this.getgroups()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tipoffManagement"}},[a("div",{staticClass:"h1"},[t._v("爆料类型管理\n     "),a("div",{staticClass:"search"},[a("Input",{attrs:{search:"","enter-button":"搜索",placeholder:"请输入搜索关键字"},on:{"on-search":t.search},model:{value:t.words,callback:function(e){t.words=e},expression:"words"}})],1)]),t._v(" "),a("div",{staticClass:"header"},[a("Button",{staticClass:"newbtn zhijian-new-btn",attrs:{type:"primary"},on:{click:function(e){t.showEditModal("new")}}},[t._v("新增")])],1),t._v(" "),a("Table",{staticClass:"zhijian-table account-table",attrs:{stripe:"",columns:t.table.columns,data:t.table.data}}),t._v(" "),a("Modal",{attrs:{"mask-closable":!1,width:"535","class-name":"ma-edit-modal"},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[a("div",{staticClass:"edit-modal-body"},[a("Icon",{attrs:{type:"android-close"},on:{click:function(e){t.editModal=!1}}}),t._v(" "),"new"==t.formValidate.type?a("div",{staticClass:"title"},[t._v("新增爆料类型")]):t._e(),t._v(" "),"edit"==t.formValidate.type?a("div",{staticClass:"title"},[t._v("编辑爆料类型")]):t._e(),t._v(" "),a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"排序",prop:"sort"}},[a("Input",{attrs:{type:"text",placeholder:"Enter something..."},model:{value:t.formValidate.sort,callback:function(e){t.$set(t.formValidate,"sort",e)},expression:"formValidate.sort"}})],1),t._v(" "),a("FormItem",{attrs:{label:"爆料类型名称",prop:"content"}},[a("Input",{attrs:{type:"text",placeholder:"Enter something..."},model:{value:t.formValidate.content,callback:function(e){t.$set(t.formValidate,"content",e)},expression:"formValidate.content"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"zhijian-btn-box"},[a("div",{staticClass:"zhijian-btn-confirm",on:{click:function(e){t.submitForm("formValidate")}}},[t._v("确定")])])])],1)},staticRenderFns:[]};var r=a("VU/8")(o,i,!1,function(t){a("dZxx")},null,null);e.default=r.exports},dZxx:function(t,e){}});