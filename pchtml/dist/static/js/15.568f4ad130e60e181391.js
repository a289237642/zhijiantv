webpackJsonp([15],{F7sh:function(t,e){},ssKL:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("bOdI"),i=s.n(a),o={name:"tipoffList",data:function(){var t=this;return{editModal:!1,moveModal:!1,animal:"1",updownModal:!1,confirm:"请确认是否上架该课程",delemodal:!1,startDate:"",h5Img:"",h5Img1:"",endDate:"",endtime:"",name0:"name0",paramses:{},is_show:1,isShow:!0,lessonid:1,audioid:1,deatillesson:{},detailModal:!1,uptypelist:[],uptype:"1",checkedGroup:[],audiopath:"",addaudioModal:!1,moveaudioModal:!1,author:"",audioModal:!1,deleaudiomodal:!1,checkedLesson:[],checkedaudio:[],type_id:"name0",table:{total:10,totalAll:10,totalAll1:10,totalSearch:10,page:1,pagesize:10,is_show:1},formValidate:{type:"new",cost_type:"1"},ruleValidate:{title:[{required:!0,message:"标题",trigger:"blur"}],cost_type:[{required:!0,message:"请选择支付类型",trigger:"blur"}]},columns2:[{type:"selection",title:"全选",width:60,align:"center",key:"id"},{title:"序号",key:"location"},{title:"ID",key:"lesson_id"},{title:"课程名称",key:"title",render:function(e,s){return e("div",{style:{display:"flex",alignItems:"center"},on:{click:function(){t.editModal=!0,t.showEditModal("edit",s.row)}}},s.row.title)}},{title:"音频数",key:"audio_num",render:function(e,s){return e("div",{style:{},on:{click:function(){t.$router.push({name:"lessonAudio",params:{lessonid:s.row.id}})}}},s.row.audio_num)}},{title:"创建人",key:"author"},{title:"领取人数",key:"buy_num"},{title:"到期时间",key:"end_time"},{title:"生成次数(邀友助力)",key:"help_bron_qr_num"},{title:"生成次数(邀友听课)",key:"listen_bron_qr_num"},{title:"进入总次数",key:"scan_qr_num"},{title:"操作",key:"action",align:"center",render:function(e,s){return e("div",[e("Button",{props:{type:"primary",size:"normal",class:"btn"},style:{background:"1"==s.row.is_show?"white":"black",border:"1"==s.row.is_show?"1px solid black":"none",color:"1"==s.row.is_show?"black":"white",marginRight:"5px"},on:{click:function(){t.paramses=s,t.updownModal=!0,t.is_show=s.row.is_show,t.getuplist()}}},"1"==s.row.is_show?"下架":"上架"),e("Button",{props:{type:"primary",size:"normal",class:"btn"},style:{background:"black",border:"none",marginRight:"5px",display:"1"==s.row.is_show?"none":""},on:{click:function(){t.delemodal=!0,t.paramses=s}}},"删除")])}}],columns3:[{type:"selection",title:"全选",width:60,align:"center",key:"id"},{title:"序号",key:"sort_num"},{title:"ID",key:"lesson_id"},{title:"课程名称",key:"title",render:function(e,s){return e("div",{style:{display:"flex",alignItems:"center"},on:{click:function(){t.editModal=!0,t.showEditModal("edit",s.row)}}},s.row.title)}},{title:"音频数",key:"audio_num",render:function(e,s){return e("div",{style:{},on:{click:function(){t.$router.push({name:"lessonAudio",params:{lessonid:s.row.id}})}}},s.row.audio_num)}},{title:"创建人",key:"author"},{title:"领取人数",key:"buy_num"},{title:"到期时间",key:"end_time"},{title:"生成次数(邀友助力)",key:"help_bron_qr_num"},{title:"生成次数(邀友听课)",key:"listen_bron_qr_num"},{title:"进入总次数",key:"scan_qr_num"},{title:"操作",key:"action",align:"center",render:function(e,s){return e("div",[e("Button",{props:{type:"primary",size:"normal",class:"btn"},style:{background:"1"==s.row.is_show?"white":"black",border:"1"==s.row.is_show?"1px solid black":"none",color:"1"==s.row.is_show?"black":"white",marginRight:"5px"},on:{click:function(){t.paramses=s,t.updownModal=!0,t.is_show=s.row.is_show,t.getuplist()}}},"1"==s.row.is_show?"下架":"上架"),e("Button",{props:{type:"primary",size:"normal",class:"btn"},style:{background:"black",border:"none",marginRight:"5px",display:"1"==s.row.is_show?"none":""},on:{click:function(){t.delemodal=!0,t.paramses=s}}},"删除"),e("Button",{props:{type:"primary",size:"normal",class:"btn"},style:{background:"black",border:"none",marginRight:"30px",display:"0"==s.row.is_show?"none":""},on:{click:function(){t.paramses=s,t.moveModal=!0}}},"移动")])}}],data2:[],data3:[]}},methods:{getLessonsAll:function(){var t=this;this.$http.post(this.PATH.PCLESSONS,{page:this.table.page,pagesize:this.table.pagesize,is_show:1}).then(function(e){200==e.status?0==e.data.errno?(t.data2=e.data.data,t.table.totalAll=e.data.count):t.$Message.success(e.data.errmsg):t.$Message.error("Fail!")})},getTypeLessons:function(t){var e=this;this.$http.post(this.PATH.PCLESSSONLIST,{page:this.table.page,pagesize:this.table.pagesize,type_id:t}).then(function(t){200==t.status?0==t.data.errno?(e.data3=t.data.data,e.table.totalAll1=t.data.count):e.$Message.success(t.data.errmsg):e.$Message.error("Fail!")})},getdownlesson:function(){this.$http.get(this.PATH.GETLESSONDOWN).then(function(t){})},getuplist:function(){var t=this;this.$http.post(this.PATH.PCGETLESSONTYPE,{page:1,pagesize:50}).then(function(e){200==e.status?0==e.data.errno?t.uptypelist=e.data.data:t.$Modal.error({width:360,content:e.data.errmsg}):t.$Message.error("Fail!")})},getLessonsAudio:function(){var t=this;this.$http.post(this.PATH.LESSONAUDIOLIST,{page:this.table.page,pagesize:this.table.pagesize,lesson_id:this.lessonid}).then(function(e){200==e.status?0==e.data.errno?(t.data3=e.data.data,t.table.totalAll=e.data.count):t.$Modal.error({width:360,content:e.data.errmsg}):t.$Message.error("Fail!")})},audioOk:function(){this.audioModal=!1,this.table.page=1,this.getLessonsAll()},handTabClick:function(t){this.name0=t,this.is_search=!1,this.type_id=t,"name0"==t?(this.is_show=1,this.getLessonsAll()):(this.is_show=0,this.getTypeLessons(t))},showEditModal:function(t,e){var s=this;this.formValidate.type=t,"new"==t||this.$http.post(this.PATH.PCLESSONDETAIL,{lesson_id:e.id}).then(function(t){200==t.status?0==t.data.errno?(s.deatillesson=t.data.data,s.formValidate.title=s.deatillesson.title,s.formValidate.subtitle=s.deatillesson.subtitle,s.h5Img=s.deatillesson.min_pic,s.formValidate.count=s.deatillesson.count,s.h5Img1=s.deatillesson.summary,s.endDate=s.deatillesson.end_time,s.cost_type=s.deatillesson.cost_type,s.formValidate.present_num=s.deatillesson.present_num,s.formValidate.base_num=s.deatillesson.base_num,s.formValidate.price=s.deatillesson.price,s.lessonid=e.id,s.author=e.author):s.$Modal.success({title:"提示",content:t.data.errmsg}):s.$Message.error("Fail!")}),this.editModal=!0},onUpload:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){t.target.files[0].type;var s=new FileReader;s.readAsDataURL(e[0]);var a=this;s.onload=function(t){var e=this;(new FormData).append("data",this.result);a.$http.post("/api/v1_0/uploadimage",{type:"jpg",data:this.result}).then(function(t){"0"==t.data.status?(a.isShow=!0,a.h5Img=t.data.url):a.$Modal.error({title:"提示",content:t.data.msg})},function(t){e.$Modal.error({title:"提示",content:success.data.msg})})}}},onUpload1:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){t.target.files[0].type;var s=new FileReader;s.readAsDataURL(e[0]);var a=this;s.onload=function(t){var e=this;(new FormData).append("data",this.result);a.$http.post("/api/v1_0/uploadimage",{type:"jpg",data:this.result}).then(function(t){"0"==t.data.status?(a.isShow=!0,a.h5Img1=t.data.url):a.$Modal.error({title:"提示",content:t.data.msg})},function(t){e.$Modal.error({title:"提示",content:success.data.msg})})}}},onUpload3:function(t){var e=this,s=this;if((t.target.files||t.dataTransfer.files).length){var a=new FormData;a.append("file",t.target.files[0]);this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading"}}),t("div","上传中...")])}}),s.$http.post("/api/v1_0/upload_audio",a).then(function(t){"0"==t.data.errno?(s.isShow=!0,s.audiopath=t.data.mp3_url,s.$Spin.hide()):s.$Modal.error({title:"提示",content:t.data.errmsg})},function(t){e.$Modal.error({title:"提示",content:success.data.msg})}),this.getLessonsAudio()}},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var s,a,o=e.formValidate.type,n="",l=new Object;if("new"==o)n=e.PATH.ADDLESSON,s={title:e.formValidate.title,subtitle:e.formValidate.subtitle,author:sessionStorage.getItem("username"),min_pic:e.h5Img,count:e.formValidate.count,summary:e.h5Img1},i()(s,"count",e.formValidate.count),i()(s,"end_time",e.endDate),i()(s,"cost_type",1),i()(s,"present_num",e.formValidate.present_num),i()(s,"base_num",e.formValidate.base_num),i()(s,"price",e.formValidate.price),l=s;else n=e.PATH.EDITLESSON,a={lesson_id:e.lessonid,title:e.formValidate.title,subtitle:e.formValidate.subtitle,author:e.author,min_pic:e.h5Img,count:e.formValidate.count,summary:e.h5Img1},i()(a,"count",e.formValidate.count),i()(a,"end_time",e.endDate),i()(a,"cost_type",1),i()(a,"present_num",e.formValidate.present_num),i()(a,"base_num",e.formValidate.base_num),i()(a,"price",e.formValidate.price),l=a;e.$http.post(n,l).then(function(t){0==t.data.errno?(e.editModal=!1,e.audioModal=!0,e.data3=[],e.lessonid=t.data.lesson_id):e.$Modal.success({title:"提示",content:t.data.errmsg,onOk:function(){}}),e.table.page=1,e.getLessonsAll()})}else e.$Message.error("Fail!")})},downlinelesson:function(t){var e=this;this.checkedLesson=[],t.forEach(function(t){e.checkedLesson.push(t.id)})},downlesson:function(t){var e=this;this.checkedLesson=[],t.forEach(function(t){e.checkedLesson.push(t.id)})},checkMoreGroupChange:function(t){this.checkedGroup=t},upLesson:function(){this.updownModal=!0,this.getuplist()},downLesson:function(){var t=this;this.updownModal=!0,"name0"==this.type_id?this.$http.post(this.PATH.DOWNLESSON,{lesson_id_list:this.checkedLesson}).then(function(e){0==e.data.errno&&(t.$Message.success(e.data.errmsg),t.getLessonsAll())}):this.$http.post(this.PATH.DOWNLESSON,{lesson_id_list:this.checkedLesson,type_id:this.type_id}).then(function(e){0==e.data.errno&&(t.$Message.success(e.data.errmsg),t.getTypeLessons(t.type_id))}),this.updownModal=!1},upok:function(){var t=this,e=[];0==this.checkedLesson.length?e.push(this.paramses.row.id):e=this.checkedLesson,this.$http.post(this.PATH.UPLOADLESSONS,{lesson_id_list:e,end_time:this.endDate,type_id_list:this.checkedGroup}).then(function(e){0==e.data.errno&&(t.$Message.success(e.data.errmsg),t.checkedLesson=[],t.getLessonsAll())}),this.updownModal=!1},downOk:function(){var t=this,e=[];e.push(this.paramses.row.id),"name0"==this.type_id?this.$http.post(this.PATH.DOWNLESSON,{lesson_id_list:e}).then(function(e){0==e.data.errno&&(t.$Message.success(e.data.errmsg),t.getLessonsAll())}):this.$http.post(this.PATH.DOWNLESSON,{lesson_id_list:e,type_id:this.type_id}).then(function(e){0==e.data.errno&&(t.$Message.success(e.data.errmsg),t.getTypeLessons(t.type_id))}),this.updownModal=!1},deleteOk:function(){var t=this,e=[];e.push(this.paramses.row.id),this.$http.post(this.PATH.DELETELESSON,{lesson_id_list:e}).then(function(e){0==e.data.errno?(t.$Message.success(e.data.errmsg),t.getLessonsAll()):t.$Message.success(e.data.errmsg)}),this.delemodal=!1},changePageAll:function(t){this.table.page=t,this.getLessonsAll()},changePageAll1:function(t){this.table.page=t,this.getTypeLessons(this.type_id)},moveOk:function(){var t=this;this.$http.post(this.PATH.LESSONMOVE,{lesson_id:this.paramses.row.id,sort_num:this.paramses.row.sort_num,move:this.animal,type_id:this.type_id}).then(function(e){200==e.status&&(t.$Message.success(e.data.errmsg),t.getTypeLessons(t.type_id))}),this.moveModal=!1},moveaudioOk:function(){var t=this;this.$http.post(this.PATH.AUDIOMOVE,{lesson_id:this.lessonid,sort_num:this.paramses.row.sort_num,move:parseInt(this.animal),audio_id:this.paramses.row.id}).then(function(e){200==e.status&&(t.$Message.success(e.data.errmsg),t.getLessonsAudio())}),this.moveaudioModal=!1}},created:function(){this.getLessonsAll(),this.getuplist()}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"tipoffList"}},[s("h1",[t._v("免费领取课程列表")]),t._v(" "),s("Button",{staticClass:"newbtn zhijian-new-btn",attrs:{type:"primary"},on:{click:t.downLesson}},[t._v("批量下架")]),t._v(" "),s("Tabs",{attrs:{value:t.name0},on:{"on-click":t.handTabClick}},[s("TabPane",{attrs:{label:"线上全部课程",name:"name0"}},[s("Table",{ref:"selection",staticClass:"tip-table",attrs:{border:"",columns:t.columns2,data:t.data2},on:{"on-selection-change":t.downlesson,"on-select-all":t.downlinelesson}}),t._v(" "),s("div",{staticClass:"zhijian-pagination"},[s("Page",{attrs:{total:t.table.totalAll,current:t.table.page,"show-elevator":"",pageSize:t.table.pagesize},on:{"on-change":t.changePageAll}})],1)],1),t._v(" "),t._l(t.uptypelist,function(e){return s("TabPane",{key:e.type_id,attrs:{label:e.name,name:e.type_id+"",value:e.type_id}},[s("Table",{ref:"selection",refInFor:!0,staticClass:"tip-table",attrs:{border:"",columns:t.columns3,data:t.data3},on:{"on-selection-change":t.downlesson,"on-select-all":t.downlinelesson}}),t._v(" "),s("div",{staticClass:"zhijian-pagination"},[s("Page",{attrs:{total:t.table.totalAll1,current:t.table.page,"show-elevator":"",pageSize:t.table.pagesize},on:{"on-change":t.changePageAll1}})],1)],1)})],2),t._v(" "),s("Modal",{attrs:{title:"Common Modal dialog box title"},model:{value:t.updownModal,callback:function(e){t.updownModal=e},expression:"updownModal"}},[s("div",[s("p",{staticStyle:{"text-align":"center",margin:"10px 0"}},[t._v("是否确定下架该课程？")]),t._v(" "),s("div",{staticClass:"zhijian-btn-box",staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"zhijian-btn-confirm",on:{click:t.downOk}},[t._v("确定")])])])]),t._v(" "),s("Modal",{attrs:{title:"Common Modal dialog box title","class-name":"ma-edit-modal"},model:{value:t.moveModal,callback:function(e){t.moveModal=e},expression:"moveModal"}},[s("div",{staticClass:"edit-modal-body"},[s("div",{staticClass:"title",staticStyle:{"font-size":"24px",color:"var(--base)","text-align":"center"}},[t._v("移动")]),t._v(" "),s("RadioGroup",{staticStyle:{margin:"20px 80px"},model:{value:t.animal,callback:function(e){t.animal=e},expression:"animal"}},[s("Radio",{attrs:{label:"1"}},[t._v("上移")]),t._v(" "),s("Radio",{attrs:{label:"2"}},[t._v("下移")]),t._v(" "),s("Radio",{attrs:{label:"3"}},[t._v("移至顶部")]),t._v(" "),s("Radio",{attrs:{label:"4"}},[t._v("移至底部")])],1)],1),t._v(" "),s("div",{staticClass:"zhijian-btn-box"},[s("div",{staticClass:"zhijian-btn-confirm",on:{click:t.moveOk}},[t._v("确定")])])]),t._v(" "),s("Modal",{attrs:{title:"Common Modal dialog box title"},model:{value:t.delemodal,callback:function(e){t.delemodal=e},expression:"delemodal"}},[s("p",{staticClass:"modelp"},[t._v("请确认是否删除改课程")]),t._v(" "),s("div",{staticClass:"zhijian-btn-box"},[s("div",{staticClass:"zhijian-btn-confirm",on:{click:t.deleteOk}},[t._v("确定")])])])],1)},staticRenderFns:[]};var l=s("VU/8")(o,n,!1,function(t){s("F7sh")},null,null);e.default=l.exports}});