webpackJsonp([30],{AqKI:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={name:"bannerManagement",data:function(){return{module1:null,h5Img:"",isShow:!0,startDate:"",endDate:"",posterid:"",formValidate:{path:"",is_show:"1"},ruleValidate:{is_show:[{required:!0,message:"请选择状态",trigger:"change"}]},posterlist:[]}},created:function(){this.getdata()},methods:{getdata:function(){var t=this;this.$http.get(this.PATH.PCPOSTERLIST).then(function(a){if(200==a.status)if(0==a.data.errno){var e=a.data.data;t.h5Img=e[0].pic,t.startDate=e[0].start_time,t.endDate=e[0].end_time,t.formValidate.path=e[0].jump_url,t.formValidate.is_show=e[0].is_show+"",t.posterid=e[0].id}else t.$Modal.error({width:360,content:a.data.errmsg});else t.$Message.error("Fail!")})},getStart:function(t){this.startDate=t},getEnd:function(t){this.endDate=t},onUpload:function(t){var a=t.target.files||t.dataTransfer.files;if(a.length){t.target.files[0].type;var e=new FileReader;e.readAsDataURL(a[0]);var i=this;e.onload=function(t){var a=this;(new FormData).append("data",this.result);i.$http.post("/api/v1_0/uploadimage",{type:"jpg",data:this.result}).then(function(t){"0"==t.data.status?(i.isShow=!0,i.h5Img=t.data.url,i.$refs.formValidate.validateField("uploadimg")):i.$Modal.error({title:"提示",content:t.data.msg})},function(t){a.$Modal.error({title:"提示",content:success.data.msg})})}}},submitForm:function(t){var a=this;this.$refs[t].validate(function(t){if(t){var e,i=new Object;e=a.PATH.UPDATEPOSTER,i={poster_id:a.posterid,jump_url:a.formValidate.path,start_time:a.startDate,end_time:a.endDate,pic:a.h5Img,is_show:a.formValidate.is_show},a.$http.post(e,i).then(function(t){200==t.status&&(a.$Modal.error({width:360,content:t.data.errmsg}),a.getdata()),a.getData()})}else a.$Message.error("Fail!")})}}},s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"bannerManagement"}},[e("div",{staticClass:"h1"},[t._v("签到海报管理")]),t._v(" "),e("Form",{ref:"formValidate",staticClass:"edit-form",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[e("FormItem",{attrs:{label:"状态",prop:"is_show"}},[e("RadioGroup",{model:{value:t.formValidate.is_show,callback:function(a){t.$set(t.formValidate,"is_show",a)},expression:"formValidate.is_show"}},[e("Radio",{attrs:{label:"1"}},[t._v("启用")]),t._v(" "),e("Radio",{attrs:{label:"0"}},[t._v("禁用")])],1)],1),t._v(" "),e("FormItem",{attrs:{label:"海报图: ",prop:"sort"}},[t.isShow?e("div",{staticClass:"h5ImgBox"},[e("img",{staticStyle:{width:"98px",height:"98px"},attrs:{src:t.h5Img}})]):t._e(),t._v(" "),e("div",[e("label",{staticClass:"button",attrs:{for:"inputFile"}},[e("span",{staticClass:"upload__select"},[t._v("点击上传图片")]),t._v(" "),e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"inputFile",accept:"image/gif, image/jpeg, image/png, image/jpg"},on:{change:t.onUpload}})])])]),t._v(" "),e("FormItem",{attrs:{label:"跳转路径：",prop:"path"}},[e("Input",{attrs:{placeholder:"跳转路径"},model:{value:t.formValidate.path,callback:function(a){t.$set(t.formValidate,"path",a)},expression:"formValidate.path"}})],1),t._v(" "),e("FormItem",{attrs:{label:"起止日期：",prop:""}},[e("DatePicker",{staticStyle:{width:"120px"},attrs:{type:"date",placeholder:"开始日期"},on:{"on-change":t.getStart},model:{value:t.startDate,callback:function(a){t.startDate=a},expression:"startDate"}}),t._v("\n            至\n            "),e("DatePicker",{staticStyle:{width:"120px"},attrs:{type:"date",placeholder:"结束日期"},on:{"on-change":t.getEnd},model:{value:t.endDate,callback:function(a){t.endDate=a},expression:"endDate"}})],1)],1),t._v(" "),e("div",{staticClass:"zhijian-btn-box"},[e("div",{staticClass:"zhijian-btn-confirm",on:{click:function(a){t.submitForm("formValidate")}}},[t._v("确定")])])],1)},staticRenderFns:[]};var r=e("VU/8")(i,s,!1,function(t){e("HZ6/")},null,null);a.default=r.exports},"HZ6/":function(t,a){}});